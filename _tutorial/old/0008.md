Benefits of keeping DRY
==
Try calling our framework with index.php?name=anonymous;DROP TABLE user;
Since we pass the parameter around without escaping it, it is easy for 
attackers to insert malicious code. This type of attack is called a Cross Site
Scripting (XSS) attack.

Since we extracted the code to get a parameter from the Request into its own 
function it is now really easy to correct that. 

    function getRequestParameter($name, $default)
    {
        $parameter = isset($_GET[$name])?$_GET[$name]:$default;    
        return mysql_escape_string(htmlspecialchars($parameter));
    }

We should also shield our database code from such an attack. Extract the database calls to their own file `lib\Database.php`. And change your actions to use this new function.
    
    <?php
    function retrieveUser( $name )
    {
	    mysqli_connect( $server, $username, $password );
	    $stmt = 'SELECT * from user WHERE uname = ' . $name;
	    $result = mysqli_stmt_fetch( $stmt );
	    $user = mysqli_fetch_object( $result );
	    return $user;
    }

Don't forget to include the new file at the beginning of your `index.php`.

Again we see that our code has become more readable because of the refactoring.
Also our actions have become much smaller.
